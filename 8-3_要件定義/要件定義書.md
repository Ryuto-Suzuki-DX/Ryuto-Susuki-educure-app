# 倉庫在庫管理システム 要件定義書

## 1. システム概要
本システムは、管理者および作業者が在庫の入出庫を正確に記録・管理できるようにする倉庫管理アプリケーションである。  
主な機能は、商品管理、入出庫予定と実績の管理、ユーザー管理である。責任者の記録、異常（破損・欠品）の記録も可能とする。

---

## 2. ユーザー要件

### 2.1 ユーザー種別
- **管理者**
  - ユーザー管理
  - 商品マスタ管理
  - 入出庫予定の登録・修正
  - 全入出庫履歴閲覧
- **作業者**
  - 入庫作業（搬入・検品）
  - 出庫作業（検品・出庫）

### 2.2 認証・認可
- Spring Security によるログイン機能
- 権限に応じた画面・操作制限
- ログアウト機能

---

## 3. 機能要件

### 3.1 商品管理
- 商品の登録／編集／削除
- 商品検索（ID／名前／カテゴリ）

### 3.2 入庫管理
- **入庫登録（管理者）**
  - 商品、仕入先、予定数量、予定日
- **入庫実績入力**
  - 搬入担当者名（手入力）
  - 保管場所(検品前保管場所)
  - 検品担当者名（手入力）
  - 差異自動計算
  - 異常情報（破損／欠品の有無、詳細記録）
  - 作業状況の入力（未登録/入庫対応済/検品対応済/済）
  - 備考
  - 画像添付

### 3.3 出庫管理
- **出庫登録（管理者）**
  - 商品、出荷先、予定数量、予定日
- **出庫実績入力**
  - 実際の出庫数量
  - 差異自動計算
  - 出庫予定入力時に、現在在庫数の
  - 異常情報（破損／欠品の有無、詳細記録）
  - 作業状況の入力（未登録/入庫対応済/検品対応済/済）
  - 検品担当者名（状態確認が先）
  - 保管場所(検品前保管場所)
  - 出庫担当者名（物理出庫が後）
  - 備考
  - 画像添付

### 3.4 在庫管理
- 商品別の現在庫数表示
- 出庫予定入力総数表示
- 入庫予定入力総数表示

### 3.5 入出庫履歴
- 入/出庫別・配送別の履歴表示
- 異常時コメント・画像添付時に対するフィルター

### 3.6 ユーザー管理
- ユーザーの新規登録／編集／削除（管理者のみ）
- 権限（管理者／作業者）の付与

### 3.7 配送業者API連携
- 出庫時に配送伝票番号を登録
- 配送業者・配送状況（発送済み／輸送中／配達完了など）のリンクを表示
- 伝票番号の誤入力防止のためバリデーション

### 3.8 入出庫予定のCSV一括登録・出力（管理者のみ）
- 入庫予定・出庫予定をCSVファイルで一括登録できる
  - ファイル形式はUTF-8、ヘッダーあり
  - 項目例：商品ID、数量、予定日、仕入先（入庫）、出荷先（出庫）など
  - 登録時にフォーマットエラーや未登録商品などの検出とエラー表示
- 登録済みの予定データをCSVファイルとして出力可能
  - 期間・商品名・仕入先・出荷先などで絞り込み可能

### 3.9 画像添付機能
- 入庫・出庫実績登録時に画像ファイル（証拠写真）を添付可能
- 対応ファイル形式：JPEG, PNG, GIF（拡張可）
- ファイルサイズ制限：最大5MBまで
- 複数画像の添付にも対応

---

## 4. 非機能要件
- **UI**: ThymeleafベースのWebインターフェース
- **DB**: PostgreSQL
- **セキュリティ**: Spring Security
- **バリデーション**: 入力値の形式／必須チェック
- **入力補助**: ログインユーザー名の自動入力、手入力との切替可

### 4.1 処理性能・応答時間
- CSV一括登録処理の目標時間
  - 1万件登録時：画面操作での処理完了を10秒以内とする
  - 5万件登録時：バッチ処理を想定し、処理時間は最大数分以内とする
- ユーザー操作時の画面応答は原則3秒以内を目標とする
- 大量データ検索は10秒以内を目指し、処理中は進捗表示を行うこと

---
